<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Photo & Video Share App</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@500;600;700&family=Noto+Sans+Bengali:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --bg-primary: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            --bg-secondary: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --bg-card: rgba(0, 210, 255, 0.05);
            --text-primary: white;
            --text-secondary: rgba(255, 255, 255, 0.8);
            --text-muted: rgba(255, 255, 255, 0.5);
            --border-color: rgba(0, 210, 255, 0.2);
            --accent-gradient: linear-gradient(90deg, #00d2ff 0%, #3a47d5 50%, #ff00ff 100%);
            --btn-gradient: linear-gradient(135deg, #00d2ff 0%, #3a47d5 100%);
        }

        body.light-mode {
            --bg-primary: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 50%, #90caf9 100%);
            --bg-secondary: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
            --bg-card: rgba(33, 150, 243, 0.05);
            --text-primary: #1a1a1a;
            --text-secondary: rgba(0, 0, 0, 0.8);
            --text-muted: rgba(0, 0, 0, 0.5);
            --border-color: rgba(33, 150, 243, 0.3);
            --accent-gradient: linear-gradient(90deg, #2196f3 0%, #1976d2 50%, #9c27b0 100%);
            --btn-gradient: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
        }

        body {
            font-family: 'Inter', 'Noto Sans Bengali', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            min-height: 100vh;
            padding: 10px;
            transition: all 0.3s ease;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        h1, h2, h3 {
            font-family: 'Poppins', 'Noto Sans Bengali', sans-serif;
            font-weight: 600;
        }

        .event-banner {
            background: var(--accent-gradient);
            color: white;
            padding: 15px;
            text-align: center;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 0 20px rgba(0, 210, 255, 0.4);
            overflow: hidden;
            position: relative;
            height: 70px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .banner-title {
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
            opacity: 0.95;
            white-space: nowrap;
            z-index: 2;
        }

        .event-slider {
            display: flex;
            animation: slide 45s linear infinite;
            position: absolute;
            top: 35px;
            white-space: nowrap;
        }

        .event-item {
            padding: 0 50px;
            font-size: 16px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.4);
        }

        @keyframes slide {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            background: var(--bg-secondary);
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4), 0 0 30px rgba(0, 210, 255, 0.2);
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .header {
            background: var(--btn-gradient);
            color: white;
            padding: 20px 20px 25px;
            text-align: center;
            position: relative;
        }

        .header-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .language-toggle, .theme-toggle-header {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 8px;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.4);
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .header p {
            font-size: 13px;
            opacity: 0.9;
            font-weight: 400;
        }

        .lang-btn, .theme-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 13px;
        }

        .lang-btn:active, .theme-btn:active {
            transform: scale(0.95);
        }

        .lang-btn.active, .theme-btn.active {
            background: linear-gradient(135deg, #00d2ff, #ff00ff);
            border-color: white;
            box-shadow: 0 0 15px rgba(0, 210, 255, 0.4);
        }

        .tabs {
            display: flex;
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 2px solid var(--border-color);
        }

        .tab {
            flex: 1;
            padding: 15px 8px;
            text-align: center;
            cursor: pointer;
            background: transparent;
            border: none;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s;
            color: var(--text-muted);
            position: relative;
        }

        .tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 3px;
            background: var(--accent-gradient);
            transform: translateX(-50%);
            transition: width 0.3s;
        }

        .tab.active {
            color: var(--text-primary);
            background: var(--bg-card);
        }

        .tab.active::after {
            width: 70%;
        }

        .content {
            padding: 20px;
            color: var(--text-primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.4s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .upload-section {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
            box-shadow: 0 0 15px rgba(0, 210, 255, 0.08);
        }

        .upload-section h2 {
            font-size: 18px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #00d2ff;
            font-size: 14px;
        }

        input[type="text"],
        input[type="file"],
        input[type="datetime-local"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s;
            background: var(--bg-card);
            color: var(--text-primary);
            font-family: 'Inter', 'Noto Sans Bengali', sans-serif;
        }

        input[type="text"]:focus,
        input[type="datetime-local"]:focus,
        textarea:focus {
            outline: none;
            border-color: #00d2ff;
            box-shadow: 0 0 12px rgba(0, 210, 255, 0.25);
        }

        .btn {
            background: var(--btn-gradient);
            color: white;
            padding: 14px 25px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            box-shadow: 0 4px 15px rgba(0, 210, 255, 0.25);
        }

        .btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 10px rgba(0, 210, 255, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .photo-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .photo-card, .video-card, .text-card {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            transition: all 0.3s;
            border: 1px solid var(--border-color);
        }

        .media-container {
            position: relative;
            overflow: hidden;
        }

        .media-container img,
        .media-container video {
            width: 100%;
            height: 250px;
            object-fit: cover;
            display: block;
        }

        .media-container video {
            background: black;
        }

        .expand-overlay {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            padding: 6px;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 10;
        }

        .expand-overlay:active {
            transform: scale(0.95);
            background: rgba(0, 210, 255, 0.8);
        }

        .expand-icon {
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .expand-icon::before,
        .expand-icon::after {
            content: '';
            position: absolute;
            background: white;
        }

        .expand-icon::before {
            width: 8px;
            height: 8px;
            border: 2px solid white;
            border-bottom: none;
            border-left: none;
            top: 1px;
            right: 1px;
        }

        .expand-icon::after {
            width: 8px;
            height: 8px;
            border: 2px solid white;
            border-top: none;
            border-right: none;
            bottom: 1px;
            left: 1px;
        }

        .text-card {
            padding: 0;
        }

        .text-post-content {
            padding: 20px;
            font-size: 15px;
            line-height: 1.7;
            color: var(--text-primary);
            min-height: 120px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .photo-info {
            padding: 12px 14px;
        }

        .user-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 0 10px;
        }

        .upload-date-only {
            font-size: 12px;
            color: var(--text-muted);
        }

        .uploader-name {
            font-size: 13px;
            font-weight: 600;
            color: #00d2ff;
        }

        .photo-caption {
            color: var(--text-secondary);
            margin: 10px 0;
            line-height: 1.5;
            font-size: 14px;
        }

        .interaction-bar {
            display: flex;
            gap: 12px;
            padding: 12px 0;
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
            margin: 10px 0;
            flex-wrap: wrap;
        }

        .interaction-btn {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            color: var(--text-primary);
            cursor: pointer;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 10px 18px;
            border-radius: 8px;
            transition: all 0.3s;
            font-weight: 600;
        }

        .interaction-btn:active {
            background: var(--btn-gradient);
            border-color: #00d2ff;
            color: white;
            transform: scale(0.98);
        }

        .reaction-picker {
            display: none;
            position: absolute;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 8px;
            gap: 5px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            z-index: 100;
            bottom: 100%;
            left: 0;
            margin-bottom: 8px;
        }

        .reaction-picker.show {
            display: flex;
            flex-wrap: wrap;
            max-width: 200px;
        }

        .reaction-emoji {
            font-size: 22px;
            cursor: pointer;
            padding: 4px;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .reaction-emoji:active {
            transform: scale(1.2);
            background: var(--bg-card);
        }

        .reactions-display {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin: 8px 0;
        }

        .reaction-count {
            background: var(--bg-card);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 13px;
            border: 1px solid var(--border-color);
        }

        .comments-section {
            border-top: 1px solid var(--border-color);
            padding-top: 12px;
            margin-top: 12px;
        }

        .comment {
            background: var(--bg-card);
            padding: 8px;
            border-radius: 8px;
            margin-bottom: 8px;
            border: 1px solid var(--border-color);
        }

        .comment-author {
            font-weight: 600;
            color: #00d2ff;
            margin-bottom: 4px;
            font-size: 13px;
        }

        .comment-text {
            color: var(--text-secondary);
            font-size: 13px;
        }

        .comment-form {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .comment-input {
            flex: 1;
            min-width: 120px;
            padding: 8px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 13px;
            background: var(--bg-card);
            color: var(--text-primary);
        }

        .comment-btn {
            padding: 8px 18px;
            background: var(--btn-gradient);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            font-size: 13px;
        }

        .comment-btn:active {
            transform: scale(0.95);
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-muted);
        }

        .empty-state h3 {
            font-size: 18px;
            margin-bottom: 8px;
        }

        .empty-state p {
            font-size: 14px;
        }

        .event-card {
            background: var(--bg-card);
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }

        .event-title {
            font-size: 17px;
            font-weight: 600;
            color: #00d2ff;
            margin-bottom: 8px;
        }

        .event-time {
            color: #ff00ff;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .event-description {
            color: var(--text-secondary);
            line-height: 1.5;
            font-size: 13px;
        }

        .delete-btn {
            background: #ff0055;
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
            font-weight: 600;
        }

        .delete-btn:active {
            transform: scale(0.95);
        }

        .event-warning {
            background: linear-gradient(135deg, rgba(255, 165, 0, 0.15), rgba(255, 85, 0, 0.15));
            border: 2px solid #ff9800;
            border-radius: 10px;
            padding: 12px 14px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #ff9800;
            font-size: 13px;
            font-weight: 600;
        }

        .warning-icon {
            font-size: 20px;
            flex-shrink: 0;
        }

        .post-actions {
            display: flex;
            justify-content: flex-end;
            padding: 0 10px 4px;
        }

        .post-delete-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 12px;
            cursor: pointer;
            padding: 4px 10px;
            border-radius: 6px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 4px;
            font-weight: 500;
        }

        .post-delete-btn:active {
            background: rgba(255, 0, 85, 0.15);
            color: #ff0055;
        }

        .create-type-toggle {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .create-type-btn {
            padding: 10px 20px;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 14px;
        }

        .create-type-btn:active {
            transform: scale(0.95);
        }

        .create-type-btn.active {
            background: var(--btn-gradient);
            border-color: #00d2ff;
            color: white;
            box-shadow: 0 0 15px rgba(0, 210, 255, 0.4);
        }

        .upload-form {
            display: none;
        }

        .upload-form.active {
            display: block;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 3000;
            justify-content: center;
            align-items: center;
            padding: 15px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal-box {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            max-width: 100%;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0,0,0,0.6), 0 0 30px rgba(0,210,255,0.2);
            animation: modalIn 0.3s ease;
            position: relative;
        }

        @keyframes modalIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal-close {
            position: absolute;
            top: 10px;
            right: 12px;
            background: rgba(0,0,0,0.5);
            border: none;
            color: #fff;
            font-size: 22px;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: background 0.2s;
        }

        .modal-close:active {
            background: rgba(255,0,85,0.6);
        }

        .modal-box img {
            width: 100%;
            border-radius: 16px 16px 0 0;
            display: block;
        }

        .modal-box video {
            width: 100%;
            border-radius: 16px 16px 0 0;
            display: block;
            background: #000;
        }

        .modal-body {
            padding: 16px 18px 20px;
            color: var(--text-primary);
        }

        .footer {
            background: var(--bg-primary);
            color: var(--text-primary);
            text-align: center;
            padding: 20px;
            font-size: 13px;
            border-top: 2px solid var(--border-color);
        }

        .footer a {
            color: #00d2ff;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }

        .footer-links {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            margin-top: 15px;
            margin-bottom: 15px;
        }

        .footer-links a {
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            transition: all 0.3s;
        }

        .social-icon {
            width: 20px;
            height: 20px;
            display: inline-block;
            vertical-align: middle;
        }

        .facebook-icon {
            fill: #1877f2;
        }

        .whatsapp-icon {
            fill: #25d366;
        }

        .location-icon {
            fill: #ea4335;
        }

        body.light-mode .facebook-icon,
        body.light-mode .whatsapp-icon,
        body.light-mode .location-icon {
            opacity: 0.9;
        }

        .notification {
            position: fixed;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--btn-gradient);
            color: white;
            padding: 12px 24px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 210, 255, 0.4);
            z-index: 2000;
            display: none;
            animation: slideDown 0.4s ease;
            font-size: 14px;
            max-width: 90%;
            font-weight: 500;
        }

        .notification.show {
            display: block;
        }

        @keyframes slideDown {
            from { transform: translateX(-50%) translateY(-80px); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }

        ::placeholder {
            color: var(--text-muted);
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-card);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #00d2ff;
        }

        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 20px;
            gap: 20px;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid var(--border-color);
            border-top: 5px solid #00d2ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-dots {
            display: flex;
            gap: 10px;
        }

        .loading-dot {
            width: 12px;
            height: 12px;
            background: var(--accent-gradient);
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .loading-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .loading-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .loading-text {
            color: var(--text-primary);
            font-size: 16px;
            font-weight: 600;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.6;
            }
            50% {
                opacity: 1;
            }
        }

        .loading-bar {
            width: 200px;
            height: 4px;
            background: var(--border-color);
            border-radius: 2px;
            overflow: hidden;
            position: relative;
        }

        .loading-bar-fill {
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 2px;
            animation: loading-progress 2s ease-in-out infinite;
        }

        @keyframes loading-progress {
            0% {
                width: 0%;
                margin-left: 0%;
            }
            50% {
                width: 75%;
                margin-left: 0%;
            }
            100% {
                width: 0%;
                margin-left: 100%;
            }
        }

        @media (max-width: 400px) {
            .header h1 { font-size: 24px; }
            .tab { font-size: 12px; padding: 13px 6px; }
            .media-container img, .media-container video { height: 200px; }
            .create-type-btn { font-size: 13px; padding: 8px 16px; }
            .header-controls { gap: 10px; }
            .banner-title { font-size: 10px; letter-spacing: 0.5px; }
        }

        button, .tab, .lang-btn, .theme-btn, input[type="file"] {
            -webkit-user-select: none;
            user-select: none;
        }

        input[type="file"] {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="notification" id="notification"></div>

    <div class="event-banner">
        <div class="banner-title" id="bannerTitle">UPCOMING EVENTS</div>
        <div class="event-slider" id="eventSlider">
            <div class="event-item">No upcoming events</div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <div class="header-controls">
                <div class="language-toggle">
                    <button class="lang-btn active" id="langEnBtn" onclick="changeLanguage('en')">English</button>
                    <button class="lang-btn" id="langBnBtn" onclick="changeLanguage('bn')">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</button>
                </div>
                <div class="theme-toggle-header">
                    <button class="theme-btn active" id="themeDarkBtn" onclick="changeTheme('dark')">
                        <span id="darkBtnText">Dark</span>
                    </button>
                    <button class="theme-btn" id="themeLightBtn" onclick="changeTheme('light')">
                        <span id="lightBtnText">Light</span>
                    </button>
                </div>
            </div>
            <h1 id="headerTitle">MeetApp</h1>
            <p id="headerSubtitle">Share your moments and connect with others in real-time</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('posts')">
                <span id="tabPosts">Posts</span>
            </button>
            <button class="tab" onclick="showTab('events')">
                <span id="tabEvents">Events</span>
            </button>
            <button class="tab" onclick="showTab('upload')">
                <span id="tabCreate">Create</span>
            </button>
        </div>

        <div class="content">
            <div id="posts" class="tab-content active">
                <h2 style="margin-bottom: 15px;" id="postsTitle">All Posts</h2>
                <div class="photo-grid" id="postsGallery"></div>
            </div>

            <div id="events" class="tab-content">
                <h2 style="margin-bottom: 15px;" id="allEventsTitle">All Events</h2>
                <div id="eventsList"></div>
            </div>

            <div id="upload" class="tab-content">
                <div class="create-type-toggle">
                    <button class="create-type-btn active" id="btnPhotoCreate" onclick="selectCreateType('photo')">
                        <span id="labelPhotoCreate">Photo</span>
                    </button>
                    <button class="create-type-btn" id="btnVideoCreate" onclick="selectCreateType('video')">
                        <span id="labelVideoCreate">Video</span>
                    </button>
                    <button class="create-type-btn" id="btnWrittenCreate" onclick="selectCreateType('written')">
                        <span id="labelWrittenCreate">Written</span>
                    </button>
                    <button class="create-type-btn" id="btnEventCreate" onclick="selectCreateType('event')">
                        <span id="labelEventCreate">Event</span>
                    </button>
                </div>

                <!-- Photo Upload Form -->
                <div id="photoUploadForm" class="upload-form active">
                    <div class="upload-section">
                        <h2 id="uploadPhotoTitle">Upload New Photo</h2>
                        
                        <div class="form-group">
                            <label id="labelYourName">Your Name (Optional)</label>
                            <input type="text" id="photoUploaderName" placeholder="Enter your name">
                        </div>

                        <div class="form-group">
                            <label id="labelSelectPhoto">Select Photo</label>
                            <input type="file" id="photoFile" accept="image/*" capture="environment">
                        </div>

                        <div class="form-group">
                            <label id="labelPhotoCaption">Caption (Optional)</label>
                            <textarea id="photoCaption" rows="3" placeholder="Write something about this photo..."></textarea>
                        </div>

                        <button class="btn" onclick="uploadPhoto()" id="btnUploadPhoto">Upload Photo</button>
                    </div>
                </div>

                <!-- Video Upload Form -->
                <div id="videoUploadForm" class="upload-form">
                    <div class="upload-section">
                        <h2 id="uploadVideoTitle">Upload New Video</h2>
                        
                        <div class="form-group">
                            <label id="labelYourNameVideo">Your Name (Optional)</label>
                            <input type="text" id="videoUploaderName" placeholder="Enter your name">
                        </div>

                        <div class="form-group">
                            <label id="labelSelectVideo">Select Video</label>
                            <input type="file" id="videoFile" accept="video/*" capture="environment">
                        </div>

                        <div class="form-group">
                            <label id="labelVideoCaption">Caption (Optional)</label>
                            <textarea id="videoCaption" rows="3" placeholder="Write something about this video..."></textarea>
                        </div>

                        <button class="btn" onclick="uploadVideo()" id="btnUploadVideo">Upload Video</button>
                    </div>
                </div>

                <!-- Written Post Form -->
                <div id="writtenUploadForm" class="upload-form">
                    <div class="upload-section">
                        <h2 id="uploadWrittenTitle">Create Written Post</h2>
                        
                        <div class="form-group">
                            <label id="labelWrittenName">Your Name (Required)</label>
                            <input type="text" id="writtenPostAuthorName" placeholder="Enter your name" required>
                        </div>

                        <div class="form-group">
                            <label id="labelWrittenContent">Your Post (Required)</label>
                            <textarea id="writtenPostContent" rows="6" placeholder="Write your thoughts..." required></textarea>
                        </div>

                        <button class="btn" onclick="uploadWrittenPost()" id="btnUploadWritten">Create Post</button>
                    </div>
                </div>

                <!-- Event Creation Form -->
                <div id="eventUploadForm" class="upload-form">
                    <div class="upload-section">
                        <h2 id="addEventTitle">Add New Event</h2>

                        <div class="event-warning" id="eventWarning">
                            <span class="warning-icon">‚ö†</span>
                            <span id="eventWarningText">Warning: You must provide both date AND time for the event.</span>
                        </div>
                        
                        <div class="form-group">
                            <label id="labelEventTitle">Event Title</label>
                            <input type="text" id="eventTitle" placeholder="e.g., Nawaz's Birthday">
                        </div>

                        <div class="form-group">
                            <label id="labelEventTime">Event Date & Time</label>
                            <input type="datetime-local" id="eventTime">
                        </div>

                        <div class="form-group">
                            <label id="labelEventDescription">Event Description (Optional)</label>
                            <textarea id="eventDescription" rows="3" placeholder="e.g., Everyone is invited to our house"></textarea>
                        </div>

                        <button class="btn" onclick="addEvent()" id="btnAddEvent">Add Event</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <span id="footerPoweredBy">Powered by</span> <a href="https://www.facebook.com/profile.php?id=61550293801682" target="_blank" rel="noopener noreferrer">MD Imtiaz Hossain Somrat</a>
            <div class="footer-links">
                <a href="https://www.facebook.com/profile.php?id=61550293801682" target="_blank" rel="noopener noreferrer">
                    <svg class="social-icon facebook-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                    Facebook
                </a>
                <a href="https://wa.me/+8801618836609" target="_blank" rel="noopener noreferrer">
                    <svg class="social-icon whatsapp-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                    </svg>
                    WhatsApp: +8801618836609
                </a>
                <a href="https://maps.app.goo.gl/qyGRBXZMCi6Cx5jv8" target="_blank" rel="noopener noreferrer">
                    <svg class="social-icon location-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                    </svg>
                    Our Location
                </a>
            </div>
            <div style="margin-top: 10px; font-size: 14px;">
                <a href="http://imtiazhs.blogspot.com" target="_blank" rel="noopener noreferrer" style="color: #00d2ff; text-decoration: none; font-weight: 700;">Visit Our Blog</a>
            </div>
            <div style="margin-top: 10px;">¬© 2026 <span id="footerAppName">MeetApp</span></div>
        </div>
    </div>

    <div class="modal-overlay" id="modalOverlay" onclick="closeModalOutside(event)">
        <div class="modal-box">
            <button class="modal-close" onclick="closeModal()">√ó</button>
            <div id="modalMedia"></div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBkV5DJpMwedW1ZbPYil4NBZL1GP_4BMz8",
            authDomain: "photo-share-app-c65fd.firebaseapp.com",
            databaseURL: "https://photo-share-app-c65fd-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "photo-share-app-c65fd",
            storageBucket: "photo-share-app-c65fd.firebasestorage.app",
            messagingSenderId: "585105127605",
            appId: "1:585105127605:web:cc948af7e01cef8c39e6fc"
        };

        let db;
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.database();
            console.log('Firebase initialized');
        } catch (error) {
            console.error('Firebase error:', error);
            db = null;
        }

        let currentLanguage = localStorage.getItem('language') || 'en';
        let currentTheme = localStorage.getItem('theme') || 'dark';
        let currentCreateType = 'photo';
        let photos = [];
        let videos = [];
        let textPosts = [];
        let events = [];
        let isLoadingPosts = true;
        let isLoadingEvents = true;
        const reactionEmojis = ['‚ù§', 'üòÇ', 'üòç', 'üòÆ', 'üò¢', 'üëç', 'üëè', 'üî•', 'üíØ', 'üéâ', '‚ú®', 'üí™'];

        const translations = {
            en: {
                bannerTitle: 'UPCOMING EVENTS',
                headerTitle: 'MeetApp',
                headerSubtitle: 'Share your moments and connect with others in real-time',
                tabCreate: 'Create',
                tabPosts: 'Posts',
                tabEvents: 'Events',
                uploadPhotoTitle: 'Upload New Photo',
                labelYourName: 'Your Name (Optional)',
                labelYourNameVideo: 'Your Name (Optional)',
                labelSelectPhoto: 'Select Photo',
                labelPhotoCaption: 'Caption (Optional)',
                btnUploadPhoto: 'Upload Photo',
                uploadVideoTitle: 'Upload New Video',
                labelSelectVideo: 'Select Video',
                labelVideoCaption: 'Caption (Optional)',
                btnUploadVideo: 'Upload Video',
                postsTitle: 'All Posts',
                addEventTitle: 'Add New Event',
                labelEventTitle: 'Event Title',
                labelEventTime: 'Event Date & Time',
                labelEventDescription: 'Event Description (Optional)',
                btnAddEvent: 'Add Event',
                allEventsTitle: 'All Events',
                footerPoweredBy: 'Powered by',
                footerAppName: 'MeetApp',
                pleaseEnterName: 'Please enter your name!',
                pleaseSelectPhoto: 'Please select a photo!',
                photoUploaded: 'Photo uploaded successfully!',
                pleaseSelectVideo: 'Please select a video!',
                videoUploaded: 'Video uploaded successfully!',
                enterNameAndComment: 'Please enter name and comment!',
                enterEventDetails: 'Please enter event title and date & time!',
                eventAdded: 'Event added successfully!',
                confirmDeleteEvent: 'Delete this event?',
                eventDeleted: 'Event deleted!',
                comments: 'Comments',
                yourName: 'Your name',
                writeComment: 'Write a comment...',
                send: 'Send',
                added: 'Added',
                delete: 'Delete',
                like: 'Like',
                react: 'React',
                noPostsYet: 'No posts yet!',
                beFirstToPost: 'Be the first to share!',
                noEventsYet: 'No events yet!',
                beFirstToAddEvent: 'Add your first event!',
                noUpcomingEvents: 'No upcoming events',
                eventWarningText: 'Warning: You must provide both date AND time for the event.',
                deletePost: 'Delete',
                confirmDeletePost: 'Delete this post?',
                postDeleted: 'Post deleted!',
                expandPost: 'View Full',
                uploadedBy: 'Uploaded by',
                darkMode: 'Dark',
                lightMode: 'Light',
                labelPhotoCreate: 'Photo',
                labelVideoCreate: 'Video',
                labelWrittenCreate: 'Written',
                labelEventCreate: 'Event',
                uploadWrittenTitle: 'Create Written Post',
                labelWrittenName: 'Your Name (Required)',
                labelWrittenContent: 'Your Post (Required)',
                btnUploadWritten: 'Create Post',
                pleaseEnterContent: 'Please write your post!',
                postCreated: 'Post created successfully!',
                darkBtnText: 'Dark',
                lightBtnText: 'Light',
                loadingPosts: 'Loading posts...',
                loadingEvents: 'Loading events...'
            },
            bn: {
                bannerTitle: '‡¶Ü‡¶∏‡¶®‡ßç‡¶® ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü',
                headerTitle: '‡¶Æ‡¶ø‡¶ü‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™',
                headerSubtitle: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§ ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤-‡¶ü‡¶æ‡¶á‡¶Æ‡ßá ‡¶Ö‡¶®‡ßç‡¶Ø‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶Ç‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡¶®',
                tabCreate: '‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®',
                tabPosts: '‡¶™‡ßã‡¶∏‡ßç‡¶ü',
                tabEvents: '‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü',
                uploadPhotoTitle: '‡¶®‡¶§‡ßÅ‡¶® ‡¶´‡¶ü‡ßã ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®',
                labelYourName: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)',
                labelYourNameVideo: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)',
                labelSelectPhoto: '‡¶´‡¶ü‡ßã ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                labelPhotoCaption: '‡¶ï‡ßç‡¶Ø‡¶æ‡¶™‡¶∂‡¶® (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)',
                btnUploadPhoto: '‡¶´‡¶ü‡ßã ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®',
                uploadVideoTitle: '‡¶®‡¶§‡ßÅ‡¶® ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®',
                labelSelectVideo: '‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                labelVideoCaption: '‡¶ï‡ßç‡¶Ø‡¶æ‡¶™‡¶∂‡¶® (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)',
                btnUploadVideo: '‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®',
                postsTitle: '‡¶∏‡¶¨ ‡¶™‡ßã‡¶∏‡ßç‡¶ü',
                addEventTitle: '‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®',
                labelEventTitle: '‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ',
                labelEventTime: '‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶ì ‡¶∏‡¶Æ‡¶Ø‡¶º',
                labelEventDescription: '‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)',
                btnAddEvent: '‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®',
                allEventsTitle: '‡¶∏‡¶¨ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü',
                footerPoweredBy: '‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶®‡¶æ‡¶Ø‡¶º',
                footerAppName: '‡¶Æ‡¶ø‡¶ü‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™',
                pleaseEnterName: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!',
                pleaseSelectPhoto: '‡¶è‡¶ï‡¶ü‡¶ø ‡¶´‡¶ü‡ßã ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!',
                photoUploaded: '‡¶´‡¶ü‡ßã ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!',
                pleaseSelectVideo: '‡¶è‡¶ï‡¶ü‡¶ø ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!',
                videoUploaded: '‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!',
                enterNameAndComment: '‡¶®‡¶æ‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!',
                enterEventDetails: '‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶ì ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!',
                eventAdded: '‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!',
                confirmDeleteEvent: '‡¶è‡¶á ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶¨‡ßá‡¶®?',
                eventDeleted: '‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!',
                comments: '‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø',
                yourName: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ',
                writeComment: '‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...',
                send: '‡¶™‡¶æ‡¶†‡¶æ‡¶®',
                added: '‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá',
                delete: '‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®',
                like: '‡¶≤‡¶æ‡¶á‡¶ï',
                react: '‡¶∞‡¶ø‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü',
                noPostsYet: '‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶®‡ßá‡¶á!',
                beFirstToPost: '‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®!',
                noEventsYet: '‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡ßã‡¶®‡ßã ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á!',
                beFirstToAddEvent: '‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®!',
                noUpcomingEvents: '‡¶ï‡ßã‡¶®‡ßã ‡¶Ü‡¶∏‡¶®‡ßç‡¶® ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á',
                eventWarningText: '‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ: ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶¶‡¶ø‡¶¨‡ßá‡¶®‡•§',
                deletePost: '‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®',
                confirmDeletePost: '‡¶è‡¶á ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶¨‡ßá‡¶®?',
                postDeleted: '‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!',
                expandPost: '‡¶¨‡¶°‡¶º ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®',
                uploadedBy: '‡¶Ü‡¶™‡¶≤‡ßã‡¶°‡¶ï‡¶æ‡¶∞‡ßÄ',
                darkMode: '‡¶°‡¶æ‡¶∞‡ßç‡¶ï',
                lightMode: '‡¶≤‡¶æ‡¶á‡¶ü',
                labelPhotoCreate: '‡¶´‡¶ü‡ßã',
                labelVideoCreate: '‡¶≠‡¶ø‡¶°‡¶ø‡¶ì',
                labelWrittenCreate: '‡¶≤‡¶ø‡¶ñ‡¶ø‡¶§',
                labelEventCreate: '‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü',
                uploadWrittenTitle: '‡¶≤‡¶ø‡¶ñ‡¶ø‡¶§ ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®',
                labelWrittenName: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï)',
                labelWrittenContent: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßã‡¶∏‡ßç‡¶ü (‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï)',
                btnUploadWritten: '‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®',
                pleaseEnterContent: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!',
                postCreated: '‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!',
                darkBtnText: '‡¶°‡¶æ‡¶∞‡ßç‡¶ï',
                lightBtnText: '‡¶≤‡¶æ‡¶á‡¶ü',
                loadingPosts: '‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...',
                loadingEvents: '‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...'
            }
        };

        function t(key) {
            return translations[currentLanguage][key] || key;
        }

        function showLoadingAnimation(type = 'posts') {
            return `
                <div class="loading-container">
                    <div class="loading-spinner"></div>
                    <div class="loading-dots">
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                    </div>
                    <div class="loading-text">${t(type === 'posts' ? 'loadingPosts' : 'loadingEvents')}</div>
                    <div class="loading-bar">
                        <div class="loading-bar-fill"></div>
                    </div>
                </div>
            `;
        }

        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('language', lang);
            
            document.getElementById('langEnBtn').classList.toggle('active', lang === 'en');
            document.getElementById('langBnBtn').classList.toggle('active', lang === 'bn');
            
            Object.keys(translations[lang]).forEach(key => {
                const el = document.getElementById(key);
                if (el) el.textContent = translations[lang][key];
            });

            document.getElementById('eventWarningText').textContent = translations[lang].eventWarningText;
            
            displayPosts();
            displayEvents();
            initEventSlider();
        }

        function changeTheme(theme) {
            currentTheme = theme;
            localStorage.setItem('theme', theme);
            
            document.getElementById('themeDarkBtn').classList.toggle('active', theme === 'dark');
            document.getElementById('themeLightBtn').classList.toggle('active', theme === 'light');
            
            if (theme === 'light') {
                document.body.classList.add('light-mode');
            } else {
                document.body.classList.remove('light-mode');
            }
        }

        if (currentTheme === 'light') {
            document.body.classList.add('light-mode');
            document.getElementById('themeDarkBtn').classList.remove('active');
            document.getElementById('themeLightBtn').classList.add('active');
        }

        function showNotification(msg) {
            const n = document.getElementById('notification');
            n.textContent = msg;
            n.classList.add('show');
            setTimeout(() => n.classList.remove('show'), 3000);
        }

        function showTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(tab).classList.add('active');
            if (tab === 'posts') displayPosts();
            if (tab === 'events') displayEvents();
        }

        function selectCreateType(type) {
            currentCreateType = type;
            document.getElementById('btnPhotoCreate').classList.toggle('active', type === 'photo');
            document.getElementById('btnVideoCreate').classList.toggle('active', type === 'video');
            document.getElementById('btnWrittenCreate').classList.toggle('active', type === 'written');
            document.getElementById('btnEventCreate').classList.toggle('active', type === 'event');
            document.getElementById('photoUploadForm').classList.toggle('active', type === 'photo');
            document.getElementById('videoUploadForm').classList.toggle('active', type === 'video');
            document.getElementById('writtenUploadForm').classList.toggle('active', type === 'written');
            document.getElementById('eventUploadForm').classList.toggle('active', type === 'event');
        }

        function uploadPhoto() {
            const nameInput = document.getElementById('photoUploaderName');
            const file = document.getElementById('photoFile');
            const caption = document.getElementById('photoCaption').value.trim();
            
            if (!file.files[0]) return showNotification(t('pleaseSelectPhoto'));

            const reader = new FileReader();
            reader.onload = (e) => {
                const photo = {
                    id: Date.now(),
                    type: 'photo',
                    image: e.target.result,
                    caption,
                    uploaderName: nameInput.value.trim() || 'Anonymous',
                    comments: [],
                    likes: 0,
                    reactions: {},
                    uploadDate: new Date().toLocaleString()
                };

                if (db) {
                    db.ref('photos/' + photo.id).set(photo).then(() => {
                        showNotification(t('photoUploaded'));
                        nameInput.value = '';
                        file.value = '';
                        document.getElementById('photoCaption').value = '';
                        showTab('posts');
                    }).catch(err => console.error(err));
                } else {
                    photos.push(photo);
                    localStorage.setItem('photos', JSON.stringify(photos));
                    showNotification(t('photoUploaded'));
                    nameInput.value = '';
                    file.value = '';
                    document.getElementById('photoCaption').value = '';
                    displayPosts();
                }
            };
            reader.readAsDataURL(file.files[0]);
        }

        function uploadVideo() {
            const nameInput = document.getElementById('videoUploaderName');
            const file = document.getElementById('videoFile');
            const caption = document.getElementById('videoCaption').value.trim();
            
            if (!file.files[0]) return showNotification(t('pleaseSelectVideo'));

            const reader = new FileReader();
            reader.onload = (e) => {
                const video = {
                    id: Date.now(),
                    type: 'video',
                    video: e.target.result,
                    caption,
                    uploaderName: nameInput.value.trim() || 'Anonymous',
                    comments: [],
                    likes: 0,
                    reactions: {},
                    uploadDate: new Date().toLocaleString()
                };

                if (db) {
                    db.ref('videos/' + video.id).set(video).then(() => {
                        showNotification(t('videoUploaded'));
                        nameInput.value = '';
                        file.value = '';
                        document.getElementById('videoCaption').value = '';
                        showTab('posts');
                    }).catch(err => console.error(err));
                } else {
                    videos.push(video);
                    localStorage.setItem('videos', JSON.stringify(videos));
                    showNotification(t('videoUploaded'));
                    nameInput.value = '';
                    file.value = '';
                    document.getElementById('videoCaption').value = '';
                    displayPosts();
                }
            };
            reader.readAsDataURL(file.files[0]);
        }

        function uploadWrittenPost() {
            const nameInput = document.getElementById('writtenPostAuthorName');
            const contentInput = document.getElementById('writtenPostContent');
            
            const authorName = nameInput.value.trim();
            const content = contentInput.value.trim();
            
            if (!authorName) return showNotification(t('pleaseEnterName'));
            if (!content) return showNotification(t('pleaseEnterContent'));

            const textPost = {
                id: Date.now(),
                type: 'text',
                content: content,
                uploaderName: authorName,
                comments: [],
                likes: 0,
                reactions: {},
                uploadDate: new Date().toLocaleString()
            };

            if (db) {
                db.ref('textPosts/' + textPost.id).set(textPost).then(() => {
                    showNotification(t('postCreated'));
                    nameInput.value = '';
                    contentInput.value = '';
                    showTab('posts');
                }).catch(err => console.error(err));
            } else {
                textPosts.push(textPost);
                localStorage.setItem('textPosts', JSON.stringify(textPosts));
                showNotification(t('postCreated'));
                nameInput.value = '';
                contentInput.value = '';
                displayPosts();
            }
        }

        function toggleLike(id, type) {
            let item;
            if (type === 'video') item = videos.find(v => v.id === id);
            else if (type === 'photo') item = photos.find(p => p.id === id);
            else if (type === 'text') item = textPosts.find(t => t.id === id);
            
            if (!item) return;
            item.likes = (item.likes || 0) + 1;
            
            if (db) {
                db.ref(`${type}${type === 'text' ? 'Posts' : 's'}/${id}`).set(item);
            } else {
                if (type === 'video') localStorage.setItem('videos', JSON.stringify(videos));
                else if (type === 'photo') localStorage.setItem('photos', JSON.stringify(photos));
                else if (type === 'text') localStorage.setItem('textPosts', JSON.stringify(textPosts));
                displayPosts();
            }
        }

        function showReactionPicker(id) {
            const picker = document.getElementById('reactionPicker-' + id);
            if (picker) picker.classList.toggle('show');
        }

        function addReaction(id, type, emoji) {
            let item;
            if (type === 'video') item = videos.find(v => v.id === id);
            else if (type === 'photo') item = photos.find(p => p.id === id);
            else if (type === 'text') item = textPosts.find(t => t.id === id);
            
            if (!item) return;
            if (!item.reactions) item.reactions = {};
            item.reactions[emoji] = (item.reactions[emoji] || 0) + 1;
            
            if (db) {
                db.ref(`${type}${type === 'text' ? 'Posts' : 's'}/${id}`).set(item);
            } else {
                if (type === 'video') localStorage.setItem('videos', JSON.stringify(videos));
                else if (type === 'photo') localStorage.setItem('photos', JSON.stringify(photos));
                else if (type === 'text') localStorage.setItem('textPosts', JSON.stringify(textPosts));
                displayPosts();
            }
            const picker = document.getElementById('reactionPicker-' + id);
            if (picker) picker.classList.remove('show');
        }

        function addComment(id, type) {
            const prefix = type === 'video' ? 'v' : type === 'text' ? 't' : '';
            const authorInput = document.getElementById(`${prefix}commentAuthor-${id}`);
            const textInput = document.getElementById(`${prefix}commentText-${id}`);
            
            if (!authorInput || !textInput) {
                console.error('Comment inputs not found for', id, type);
                return;
            }
            
            const author = authorInput.value.trim();
            const text = textInput.value.trim();
            if (!author || !text) return showNotification(t('enterNameAndComment'));

            let item;
            if (type === 'video') item = videos.find(v => v.id === id);
            else if (type === 'photo') item = photos.find(p => p.id === id);
            else if (type === 'text') item = textPosts.find(t => t.id === id);
            
            if (item) {
                if (!item.comments) item.comments = [];
                item.comments.push({ author, text, date: new Date().toLocaleString() });
                
                if (db) {
                    db.ref(`${type}${type === 'text' ? 'Posts' : 's'}/${id}`).set(item).then(() => {
                        authorInput.value = '';
                        textInput.value = '';
                    }).catch(err => console.error('Error saving comment:', err));
                } else {
                    if (type === 'video') localStorage.setItem('videos', JSON.stringify(videos));
                    else if (type === 'photo') localStorage.setItem('photos', JSON.stringify(photos));
                    else if (type === 'text') localStorage.setItem('textPosts', JSON.stringify(textPosts));
                    authorInput.value = '';
                    textInput.value = '';
                    displayPosts();
                }
            }
        }

        function displayPosts() {
            const gallery = document.getElementById('postsGallery');
            
            if (isLoadingPosts) {
                gallery.innerHTML = showLoadingAnimation('posts');
                return;
            }
            
            let allPosts = [
                ...photos.map(p => ({...p, type: 'photo'})), 
                ...videos.map(v => ({...v, type: 'video'})),
                ...textPosts.map(t => ({...t, type: 'text'}))
            ].sort((a, b) => b.id - a.id);
            
            if (allPosts.length === 0) {
                gallery.innerHTML = `<div class="empty-state" style="grid-column: 1/-1;"><h3>${t('noPostsYet')}</h3><p>${t('beFirstToPost')}</p></div>`;
                return;
            }

            gallery.innerHTML = allPosts.map(post => {
                if (post.type === 'photo') return createPhotoCard(post);
                else if (post.type === 'video') return createVideoCard(post);
                else if (post.type === 'text') return createTextCard(post);
            }).join('');
        }

        function createPhotoCard(photo) {
            const reactions = Object.entries(photo.reactions || {}).map(([emoji, count]) => `<span class="reaction-count">${emoji} ${count}</span>`).join('');
            const comments = (photo.comments || []).map(c => `<div class="comment"><div class="comment-author">${c.author}</div><div class="comment-text">${c.text}</div></div>`).join('');
            
            return `<div class="photo-card">
                <div class="user-info">
                    <div class="uploader-name">${photo.uploaderName || 'Anonymous'}</div>
                    <div class="upload-date-only">${photo.uploadDate}</div>
                </div>
                <div class="post-actions">
                    <button class="post-delete-btn" onclick="deletePost(${photo.id}, 'photo')">${t('deletePost')}</button>
                </div>
                <div class="media-container">
                    <img src="${photo.image}" alt="Photo">
                    <div class="expand-overlay" onclick="openModal(${photo.id}, 'photo')">
                        <div class="expand-icon"></div>
                    </div>
                </div>
                <div class="photo-info">
                    ${photo.caption ? `<p class="photo-caption">${photo.caption}</p>` : ''}
                    ${reactions ? `<div class="reactions-display">${reactions}</div>` : ''}
                    <div class="interaction-bar">
                        <button class="interaction-btn" onclick="toggleLike(${photo.id}, 'photo')">${t('like')} (${photo.likes || 0})</button>
                        <button class="interaction-btn" onclick="showReactionPicker(${photo.id})" style="position: relative;">${t('react')}<div class="reaction-picker" id="reactionPicker-${photo.id}">${reactionEmojis.map(emoji => `<span class="reaction-emoji" onclick="addReaction(${photo.id}, 'photo', '${emoji}')">${emoji}</span>`).join('')}</div></button>
                    </div>
                    <div class="comments-section">
                        <strong>${t('comments')} (${(photo.comments || []).length})</strong>
                        ${comments}
                        <div class="comment-form">
                            <input type="text" class="comment-input" id="commentAuthor-${photo.id}" placeholder="${t('yourName')}">
                            <input type="text" class="comment-input" id="commentText-${photo.id}" placeholder="${t('writeComment')}">
                            <button class="comment-btn" onclick="addComment(${photo.id}, 'photo')">${t('send')}</button>
                        </div>
                    </div>
                </div>
            </div>`;
        }

        function createVideoCard(video) {
            const reactions = Object.entries(video.reactions || {}).map(([emoji, count]) => `<span class="reaction-count">${emoji} ${count}</span>`).join('');
            const comments = (video.comments || []).map(c => `<div class="comment"><div class="comment-author">${c.author}</div><div class="comment-text">${c.text}</div></div>`).join('');
            
            return `<div class="video-card">
                <div class="user-info">
                    <div class="uploader-name">${video.uploaderName || 'Anonymous'}</div>
                    <div class="upload-date-only">${video.uploadDate}</div>
                </div>
                <div class="post-actions">
                    <button class="post-delete-btn" onclick="deletePost(${video.id}, 'video')">${t('deletePost')}</button>
                </div>
                <div class="media-container">
                    <video controls><source src="${video.video}" type="video/mp4"></video>
                    <div class="expand-overlay" onclick="openModal(${video.id}, 'video')">
                        <div class="expand-icon"></div>
                    </div>
                </div>
                <div class="photo-info">
                    ${video.caption ? `<p class="photo-caption">${video.caption}</p>` : ''}
                    ${reactions ? `<div class="reactions-display">${reactions}</div>` : ''}
                    <div class="interaction-bar">
                        <button class="interaction-btn" onclick="toggleLike(${video.id}, 'video')">${t('like')} (${video.likes || 0})</button>
                        <button class="interaction-btn" onclick="showReactionPicker(${video.id})" style="position: relative;">${t('react')}<div class="reaction-picker" id="reactionPicker-${video.id}">${reactionEmojis.map(emoji => `<span class="reaction-emoji" onclick="addReaction(${video.id}, 'video', '${emoji}')">${emoji}</span>`).join('')}</div></button>
                    </div>
                    <div class="comments-section">
                        <strong>${t('comments')} (${(video.comments || []).length})</strong>
                        ${comments}
                        <div class="comment-form">
                            <input type="text" class="comment-input" id="vcommentAuthor-${video.id}" placeholder="${t('yourName')}">
                            <input type="text" class="comment-input" id="vcommentText-${video.id}" placeholder="${t('writeComment')}">
                            <button class="comment-btn" onclick="addComment(${video.id}, 'video')">${t('send')}</button>
                        </div>
                    </div>
                </div>
            </div>`;
        }

        function createTextCard(textPost) {
            const reactions = Object.entries(textPost.reactions || {}).map(([emoji, count]) => `<span class="reaction-count">${emoji} ${count}</span>`).join('');
            const comments = (textPost.comments || []).map(c => `<div class="comment"><div class="comment-author">${c.author}</div><div class="comment-text">${c.text}</div></div>`).join('');
            
            return `<div class="text-card">
                <div class="user-info" style="padding: 10px 10px 0 10px;">
                    <div class="uploader-name">${textPost.uploaderName || 'Anonymous'}</div>
                    <div class="upload-date-only">${textPost.uploadDate}</div>
                </div>
                <div class="post-actions">
                    <button class="post-delete-btn" onclick="deletePost(${textPost.id}, 'text')">${t('deletePost')}</button>
                </div>
                <div class="text-post-content">${textPost.content}</div>
                <div class="photo-info">
                    ${reactions ? `<div class="reactions-display">${reactions}</div>` : ''}
                    <div class="interaction-bar">
                        <button class="interaction-btn" onclick="toggleLike(${textPost.id}, 'text')">${t('like')} (${textPost.likes || 0})</button>
                        <button class="interaction-btn" onclick="showReactionPicker(${textPost.id})" style="position: relative;">${t('react')}<div class="reaction-picker" id="reactionPicker-${textPost.id}">${reactionEmojis.map(emoji => `<span class="reaction-emoji" onclick="addReaction(${textPost.id}, 'text', '${emoji}')">${emoji}</span>`).join('')}</div></button>
                    </div>
                    <div class="comments-section">
                        <strong>${t('comments')} (${(textPost.comments || []).length})</strong>
                        ${comments}
                        <div class="comment-form">
                            <input type="text" class="comment-input" id="tcommentAuthor-${textPost.id}" placeholder="${t('yourName')}">
                            <input type="text" class="comment-input" id="tcommentText-${textPost.id}" placeholder="${t('writeComment')}">
                            <button class="comment-btn" onclick="addComment(${textPost.id}, 'text')">${t('send')}</button>
                        </div>
                    </div>
                </div>
            </div>`;
        }

        function deletePost(id, type) {
            if (!confirm(t('confirmDeletePost'))) return;
            if (db) {
                db.ref(`${type}${type === 'text' ? 'Posts' : 's'}/${id}`).remove().then(() => {
                    showNotification(t('postDeleted'));
                });
            } else {
                if (type === 'photo') {
                    photos = photos.filter(p => p.id !== id);
                    localStorage.setItem('photos', JSON.stringify(photos));
                } else if (type === 'video') {
                    videos = videos.filter(v => v.id !== id);
                    localStorage.setItem('videos', JSON.stringify(videos));
                } else if (type === 'text') {
                    textPosts = textPosts.filter(t => t.id !== id);
                    localStorage.setItem('textPosts', JSON.stringify(textPosts));
                }
                displayPosts();
                showNotification(t('postDeleted'));
            }
        }

        function openModal(id, type) {
            const item = type === 'video' ? videos.find(v => v.id === id) : photos.find(p => p.id === id);
            if (!item) return;

            const mediaEl = document.getElementById('modalMedia');
            if (type === 'photo') {
                mediaEl.innerHTML = `<img src="${item.image}" alt="Photo">`;
            } else {
                mediaEl.innerHTML = `<video controls autoplay><source src="${item.video}" type="video/mp4"></video>`;
            }

            const reactions = Object.entries(item.reactions || {}).map(([emoji, count]) => `<span class="reaction-count">${emoji} ${count}</span>`).join('');
            const comments = (item.comments || []).map(c => `<div class="comment"><div class="comment-author">${c.author}</div><div class="comment-text">${c.text}</div></div>`).join('');
            const prefix = type === 'video' ? 'modal-v' : 'modal-';

            document.getElementById('modalBody').innerHTML = `
                <div style="font-size:13px; font-weight:600; color: #00d2ff; margin-bottom:6px;">${item.uploaderName || 'Anonymous'}</div>
                <div style="font-size:12px; color: var(--text-muted); margin-bottom:10px;">${item.uploadDate}</div>
                ${item.caption ? `<p class="photo-caption">${item.caption}</p>` : ''}
                ${reactions ? `<div class="reactions-display">${reactions}</div>` : ''}
                <div class="interaction-bar">
                    <button class="interaction-btn" onclick="modalToggleLike(${id}, '${type}')">${t('like')} (${item.likes || 0})</button>
                    <button class="interaction-btn" onclick="modalShowReactionPicker(${id}, '${type}')" style="position:relative;">${t('react')}
                        <div class="reaction-picker" id="modalReactionPicker-${id}">${reactionEmojis.map(emoji => `<span class="reaction-emoji" onclick="modalAddReaction(${id}, '${type}', '${emoji}')">${emoji}</span>`).join('')}</div>
                    </button>
                </div>
                <div class="comments-section">
                    <strong>${t('comments')} (${(item.comments || []).length})</strong>
                    <div id="modalCommentsList">${comments}</div>
                    <div class="comment-form">
                        <input type="text" class="comment-input" id="${prefix}commentAuthor-${id}" placeholder="${t('yourName')}">
                        <input type="text" class="comment-input" id="${prefix}commentText-${id}" placeholder="${t('writeComment')}">
                        <button class="comment-btn" onclick="modalAddComment(${id}, '${type}')">${t('send')}</button>
                    </div>
                </div>
            `;

            document.getElementById('modalOverlay').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('show');
            document.body.style.overflow = '';
            const v = document.querySelector('.modal-box video');
            if (v) v.pause();
        }

        function closeModalOutside(e) {
            if (e.target === document.getElementById('modalOverlay')) closeModal();
        }

        function modalToggleLike(id, type) {
            toggleLike(id, type);
            setTimeout(() => { closeModal(); openModal(id, type); }, 200);
        }

        function modalShowReactionPicker(id, type) {
            const picker = document.getElementById('modalReactionPicker-' + id);
            if (picker) picker.classList.toggle('show');
        }

        function modalAddReaction(id, type, emoji) {
            addReaction(id, type, emoji);
            setTimeout(() => { closeModal(); openModal(id, type); }, 200);
        }

        function modalAddComment(id, type) {
            const prefix = type === 'video' ? 'modal-v' : 'modal-';
            const authorInput = document.getElementById(`${prefix}commentAuthor-${id}`);
            const textInput = document.getElementById(`${prefix}commentText-${id}`);
            if (!authorInput || !textInput) return;

            const author = authorInput.value.trim();
            const text = textInput.value.trim();
            if (!author || !text) return showNotification(t('enterNameAndComment'));

            const item = type === 'video' ? videos.find(v => v.id === id) : photos.find(p => p.id === id);
            if (item) {
                if (!item.comments) item.comments = [];
                item.comments.push({ author, text, date: new Date().toLocaleString() });
                if (db) {
                    db.ref(`${type}s/${id}`).set(item).then(() => {
                        setTimeout(() => { closeModal(); openModal(id, type); }, 150);
                    });
                } else {
                    localStorage.setItem(type === 'video' ? 'videos' : 'photos', JSON.stringify(type === 'video' ? videos : photos));
                    setTimeout(() => { closeModal(); openModal(id, type); }, 150);
                }
            }
        }

        function addEvent() {
            const titleInput = document.getElementById('eventTitle');
            const timeInput = document.getElementById('eventTime');
            const descInput = document.getElementById('eventDescription');
            
            const title = titleInput.value.trim();
            const time = timeInput.value;
            const description = descInput.value.trim();
            
            if (!title || !time) {
                showNotification(t('enterEventDetails'));
                return;
            }

            const newEvent = {
                id: Date.now(),
                title: title,
                time: new Date(time).toLocaleString(),
                description: description,
                createdDate: new Date().toLocaleString()
            };

            if (db) {
                db.ref('events/' + newEvent.id).set(newEvent).then(() => {
                    showNotification(t('eventAdded'));
                    titleInput.value = '';
                    timeInput.value = '';
                    descInput.value = '';
                }).catch(err => console.error(err));
            } else {
                events.push(newEvent);
                localStorage.setItem('events', JSON.stringify(events));
                showNotification(t('eventAdded'));
                displayEvents();
                initEventSlider();
                titleInput.value = '';
                timeInput.value = '';
                descInput.value = '';
            }
        }

        function displayEvents() {
            const display = document.getElementById('eventsList');
            
            if (isLoadingEvents) {
                display.innerHTML = showLoadingAnimation('events');
                return;
            }
            
            if (events.length === 0) {
                display.innerHTML = `<div class="empty-state"><h3>${t('noEventsYet')}</h3><p>${t('beFirstToAddEvent')}</p></div>`;
                return;
            }
            display.innerHTML = events.map(e => `<div class="event-card">
                <div class="event-title">${e.title}</div>
                <div class="event-time">${e.time}</div>
                ${e.description ? `<div class="event-description">${e.description}</div>` : ''}
                <div style="margin-top: 12px; color: var(--text-muted); font-size: 12px; display: flex; justify-content: space-between; align-items: center;">
                    <span>${t('added')}: ${e.createdDate}</span>
                    <button class="delete-btn" onclick="deleteEvent(${e.id})">${t('delete')}</button>
                </div>
            </div>`).join('');
        }

        function deleteEvent(id) {
            if (!confirm(t('confirmDeleteEvent'))) return;
            if (db) {
                db.ref('events/' + id).remove().then(() => {
                    showNotification(t('eventDeleted'));
                });
            } else {
                events = events.filter(e => e.id !== id);
                localStorage.setItem('events', JSON.stringify(events));
                displayEvents();
                initEventSlider();
                showNotification(t('eventDeleted'));
            }
        }

        function initEventSlider() {
            const slider = document.getElementById('eventSlider');
            
            if (events.length === 0) {
                slider.innerHTML = `<div class="event-item">${t('noUpcomingEvents')}</div>`;
                return;
            }
            
            const eventItems = events.map(e => 
                `<div class="event-item">${e.title} - ${e.time}</div>`
            ).join('');
            
            slider.innerHTML = eventItems + eventItems + eventItems;
        }

        function initFirebaseListeners() {
            if (!db) {
                console.log('Using localStorage mode');
                isLoadingPosts = false;
                isLoadingEvents = false;
                displayPosts();
                displayEvents();
                return;
            }
            
            db.ref('photos').on('value', (snapshot) => {
                photos = snapshot.val() ? Object.values(snapshot.val()) : [];
                isLoadingPosts = false;
                displayPosts();
            });

            db.ref('videos').on('value', (snapshot) => {
                videos = snapshot.val() ? Object.values(snapshot.val()) : [];
                isLoadingPosts = false;
                displayPosts();
            });

            db.ref('textPosts').on('value', (snapshot) => {
                textPosts = snapshot.val() ? Object.values(snapshot.val()) : [];
                isLoadingPosts = false;
                displayPosts();
            });

            db.ref('events').on('value', (snapshot) => {
                events = snapshot.val() ? Object.values(snapshot.val()) : [];
                isLoadingEvents = false;
                initEventSlider();
                displayEvents();
            });
            
            console.log('Firebase real-time sync active');
        }

        window.addEventListener('DOMContentLoaded', () => {
            if (currentLanguage === 'bn') changeLanguage('bn');
            
            if (!db) {
                photos = JSON.parse(localStorage.getItem('photos')) || [];
                videos = JSON.parse(localStorage.getItem('videos')) || [];
                textPosts = JSON.parse(localStorage.getItem('textPosts')) || [];
                events = JSON.parse(localStorage.getItem('events')) || [];
                isLoadingPosts = false;
                isLoadingEvents = false;
            }
            
            displayPosts();
            displayEvents();
            initFirebaseListeners();
            initEventSlider();
            console.log('App initialized');
        });

        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>
